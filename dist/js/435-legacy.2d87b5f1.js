"use strict";(self["webpackChunk_sci_flare_test"]=self["webpackChunk_sci_flare_test"]||[]).push([[435],{6435:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",[n("data-table",{attrs:{labels:t.labels,data:t.users,is_data_waiting:t.is_data_waiting,pagination:t.filter},on:{pagination:t.getPagingRecords,search:t.getPagingRecords}})],1)],1)},a=[],i=n(4176);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){l(i,r,a,s,o,"next",t)}function o(t){l(i,r,a,s,o,"throw",t)}s(void 0)}))}}var f={name:"UserList",data:function(){return{users:[],filter:{search:"",page:1,last:null,next:2,prev:null,offset:0,limit:10},labels:{columns:["Name","Designation","Organisation","Role","Status","Action"],rows:["name","designation","organisation","role","status"],path:"/users",actions:{edit:!0,view:!0,status:!0,delete:!0}},is_data_waiting:!0}},created:function(){var t=this;return u(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.$store.state.pagination,e.t0=n.route===t.$route.path,e.next=!0===e.t0?4:!1===e.t0?7:9;break;case 4:return delete n.route,t.filter=n,e.abrupt("break",9);case 7:return t.filter,e.abrupt("break",9);case 9:t.getUsers(t.filter),i.N.$on("status",(function(e){var n="active"==e.status_name.split("-")[1]?"de-activate":"activate",r="success"==e.status_name.split("-")[1]?"danger":"success";t.$alert.Swal.fire({html:"Do you <b class='text-".concat(r,"'>").concat(n,"</b> of ").concat(e.name),title:"User Management",confirmButtonColor:"#0f9ca6",showDenyButton:!0,confirmButtonText:"Yes, ".concat(n),denyButtonText:"No",reverseButtons:!0,allowOutsideClick:!1,allowEscapeKey:!1}).then((function(n){n.isConfirmed&&(t.$alert.processing("Status Changing ..."),t.$http.put("users/status",{id:e.id,type:"user"}).then((function(e){var n=e.data.data.status_name.split("-")[1];t.audioNotify("User ".concat(n," successfully")),t.$alert.toast("User ".concat(n," successfully"),"info"),t.is_data_waiting=!0,t.getUsers(t.filter)})))}))})),i.N.$on("delete",(function(e){console.log(e),t.$alert.Swal.fire({html:"Do you delete ".concat(e.name,"?"),title:"User Management",confirmButtonColor:"#0f9ca6",showDenyButton:!0,confirmButtonText:"Yes, delete",denyButtonText:"No",reverseButtons:!0,allowOutsideClick:!1,allowEscapeKey:!1}).then((function(n){n.isConfirmed&&(t.$alert.processing("Deleting ..."),t.$http.delete("users/delete/".concat(e.id)).then((function(n){t.audioNotify("User ".concat(e.name," deleted")),t.$alert.toast("User ".concat(e.name," deleted"),"info"),t.is_data_waiting=!0,t.getUsers(t.filter)})))}))}));case 12:case"end":return e.stop()}}),e)})))()},methods:{getUsers:function(t){var e=this;this.$http.post("users",t).then((function(t){e.is_data_waiting=!1,e.users=t.data.data.users;var n=t.data.data.pagination,r=n.page,a=n.prev,i=n.last,s=n.next,c=n.limit,l=n.offset;e.filter=o(o({},e.filter),{},{page:r,prev:a,last:i,next:s,limit:c,offset:l})}))},getPagingRecords:function(t){var e=t.limit,n=t.page,r=t.search;this.is_data_waiting=!0,this.getUsers(o(o({},this.filter),{},{offset:0,limit:e,page:n,search:r}))},makeFilter:function(){this.is_data_waiting=!0,i.N.$emit("clearSearch"),this.getUsers(o(o({},this.filter),{},{page:1,prev:null,next:2,offset:0}))},makeClear:function(){var t=this;Object.getOwnPropertyNames(this.filter).forEach((function(e){t.filter[e]=""})),i.N.$emit("clearSearch"),i.N.$emit("clearRange"),this.filter=o(o({},this.filter),{},{page:1,next:2,prev:null,limit:10,offset:0,type:this.$route.params.member_type,did_save:1}),this.$store.commit("setPagination",[{},""]),this.is_data_waiting=!0,this.getUsers(this.filter)}}},d=f,p=n(1001),g=(0,p.Z)(d,r,a,!1,null,null,null),h=g.exports},1001:function(t,e,n){function r(t,e,n,r,a,i,s,o){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):a&&(c=o?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:l}}n.d(e,{Z:function(){return r}})},4176:function(t,e,n){n.d(e,{N:function(){return a}});var r=n(538),a=new r.Z}}]);
//# sourceMappingURL=435-legacy.2d87b5f1.js.map